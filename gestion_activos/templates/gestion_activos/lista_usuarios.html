{% extends 'gestion_activos/base.html' %}
{% load static %}

{% block title %}Usuarios y Roles{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
  <h2 class="text-primary"><i class="fas fa-users-cog me-2"></i>Usuarios y Roles</h2>
  <a href="{% url 'crear_usuario' %}" class="btn btn-success">
    <i class="fas fa-user-plus me-1"></i> Agregar Usuario
  </a>
</div>

<div class="card shadow-sm">
  <div class="card-body">
    <div class="table-responsive">
      <table id="tabla-usuarios" class="table table-bordered table-hover">
        <thead class="table-light">
          <tr>
            <th>Usuario</th>
            <th>Nombre Completo</th>
            <th>Correo Electr√≥nico</th>
            <th>Grupo (Rol)</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody>
          {% for u in usuarios %}
          <tr>
            <td>{{ u.username }}</td>
            <td>{{ u.first_name }} {{ u.last_name }}</td>
            <td>{{ u.email }}</td>
            <td>
              {% for group in u.groups.all %}
                <span class="badge bg-primary">{{ group.name }}</span>
              {% empty %}
                <span class="badge bg-secondary">Sin rol asignado</span>
              {% endfor %}
            </td>
            <td>
              <a href="{% url 'editar_usuario' u.pk %}" class="btn btn-sm btn-warning" title="Editar">‚úèÔ∏è</a>
              <a href="{% url 'eliminar_usuario' u.pk %}" class="btn btn-sm btn-danger" title="Eliminar">üóëÔ∏è</a>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>
{% endblock %}

{% block extra_js %}
{% endblock %}