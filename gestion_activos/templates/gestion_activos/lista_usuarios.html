{% extends 'gestion_activos/base.html' %}
{% block title %}Usuarios y Roles{% endblock %}

{% block content %}
<h2>Usuarios y Roles</h2>
<table id="tabla-usuarios" class="table table-striped">
  <thead>
    <tr>
      <th>Usuario</th>
      <th>Grupos</th>
      <th>Permisos</th>
      <th>Acciones</th>
    </tr>
  </thead>
  <tbody>
    {% for u in usuarios %}
    <tr>
      <td>{{ u.username }}</td>
      <td>{{ u.groups.all|join:", " }}</td>
      <td>{{ u.get_all_permissions|join:", " }}</td>
      <td>
        <a href="{% url 'editar_usuario' u.pk %}" class="btn btn-sm btn-warning">✏️</a>
        <a href="{% url 'eliminar_usuario' u.pk %}" class="btn btn-sm btn-danger">🗑️</a>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}

{% block extra_js %}
<script>
  $(function(){
    $('#tabla-usuarios').DataTable({
      pageLength: 10,
      language: { url: '//cdn.datatables.net/plug-ins/1.13.4/i18n/es-ES.json' }
    });
  });
</script>
{% endblock %}