{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>{% block title %}Sistema de Activos{% endblock %}</title>


  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css" rel="stylesheet">
  <link href="https://cdn.datatables.net/buttons/2.4.1/css/buttons.dataTables.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
  <link rel="stylesheet" href="{% static 'css/styles.css' %}">

  <style>
    {% if request.resolver_match.url_name != 'login' %}
    body {
      margin: 0;
      padding: 0;
      overflow-x: hidden;
    }

    .sidebar {
      position: fixed;
      top: 0;
      right: 0;
      width: 250px;
      height: 100%;
      background-color: rgba(33, 37, 41, 0.95); /* dark with transparency */
      color: white;
      padding-top: 60px;
      transition: transform 0.3s ease-in-out;
      z-index: 1000;
    }

    .sidebar.collapsed {
      transform: translateX(100%);
    }

    .sidebar a {
      display: flex;
      align-items: center;
      padding: 12px 20px;
      color: white;
      text-decoration: none;
    }

    .sidebar a:hover {
      background-color: rgba(255, 255, 255, 0.1);
    }

    .sidebar i {
      margin-right: 10px;
    }

    .content-wrapper {
      padding: 20px;
      transition: margin 0.3s ease-in-out;
    }

    .toggle-btn {
      position: fixed;
      top: 10px;
      right: 10px;
      background: #0d6efd;
      color: white;
      border: none;
      z-index: 1100;
      font-size: 1.5rem;
      padding: 6px 10px;
      border-radius: 4px;
      transition: background 0.3s;
    }

    .toggle-btn:hover {
      background: #0846b8;
    }

    .sidebar img {
      max-width: 70px;
      height: auto;
      display: block;
      margin: 0 auto 10px;
      border-radius: 8px;
    }
    {% endif %}
  </style>
</head>

<body class="bg-light">
{% if request.resolver_match.url_name != 'login' %}
  <!-- Botón para contraer/desplegar -->
  <button id="menuToggle" class="toggle-btn">
    <i class="fas fa-bars"></i>
  </button>

  <!-- Sidebar derecho -->
  <div id="sidebar" class="sidebar animate__animated animate__fadeInRight">
    <div class="text-center mb-3">
      <img src="{% static 'img/logo_menu.png' %}" alt="Logo">
    </div>
    <a href="{% url 'lista_activos' %}"><i class="fas fa-boxes-stacked"></i> Activos</a>
    <a href="{% url 'lista_categorias' %}"><i class="fas fa-layer-group"></i> Categorías</a>
    <a href="{% url 'lista_ubicaciones' %}"><i class="fas fa-location-dot"></i> Ubicaciones</a>
    <a href="{% url 'logout' %}"><i class="fas fa-sign-out-alt"></i> Cerrar sesión</a>
  </div>
{% endif %}


<div id="mainContent" class="content-wrapper">
  {% block content %}{% endblock %}
</div>


<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/buttons/2.4.1/js/dataTables.buttons.min.js"></script>
<script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.html5.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.0/jszip.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js"></script>

{% block extra_js %}{% endblock %}

{% if request.resolver_match.url_name != 'login' %}
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const sidebar = document.getElementById('sidebar');
    const toggleBtn = document.getElementById('menuToggle');

    // Cargar estado previo
    if (localStorage.getItem('sidebar-collapsed') === 'true') {
      sidebar.classList.add('collapsed');
    }

    toggleBtn.addEventListener('click', () => {
      sidebar.classList.toggle('collapsed');
      localStorage.setItem('sidebar-collapsed', sidebar.classList.contains('collapsed'));
    });
  });
</script>
{% endif %}
</body>
</html>