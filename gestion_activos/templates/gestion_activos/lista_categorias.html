{% extends 'gestion_activos/base.html' %}
{% load static %}

{% block title %}Categorías{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
  <h2 class="text-primary fw-bold"><i class="fas fa-folder-open me-2"></i>Categorías</h2>

  <a href="{% url 'crear_categoria' %}" class="btn btn-success shadow-sm">
    <i class="fas fa-plus"></i> Agregar Categoría
  </a>
</div>

<div class="table-responsive">
  <table id="tabla-categorias" class="table table-bordered table-hover shadow-sm rounded">
    <thead class="table-light text-dark">
      <tr>
        <th>Nombre</th>
        <th>Descripción</th>
        <th style="width: 120px;">Acciones</th>
      </tr>
    </thead>
    <tbody>
      {% for categoria in categorias %}
      <tr>
        <td>{{ categoria.nombre }}</td>
        <td>{{ categoria.descripcion }}</td>
        <td>
          <a href="{% url 'editar_categoria' categoria.pk %}" class="btn btn-sm btn-warning me-1">
            <i class="fas fa-edit"></i>
          </a>
          <a href="{% url 'eliminar_categoria' categoria.pk %}" class="btn btn-sm btn-danger">
            <i class="fas fa-trash-alt"></i>
          </a>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}

{% block extra_js %}
<script>
  $(document).ready(function () {
    const table = $('#tabla-categorias').DataTable({
      language: {
        url: '//cdn.datatables.net/plug-ins/1.13.4/i18n/es-ES.json'
      },
      dom: "<'row mb-3'<'col-sm-6'l><'col-sm-6'f>>" +
           "<'row'<'col-sm-12'tr>>" +
           "<'row mt-3'<'col-sm-5'i><'col-sm-7'p>>"
    });

    // Personaliza el input de búsqueda
    const input = $('#tabla-categorias_filter input');
    input.attr('placeholder', 'Buscar categoría');
    input.before('<i class="fas fa-search me-2"></i>');
    input.addClass('form-control d-inline-block w-auto ms-2 shadow-sm animated-search');
  });
</script>

<style>
  .animated-search {
    transition: width 0.4s ease-in-out;
    width: 160px;
  }

  .animated-search:focus {
    width: 280px;
  }

  table.dataTable {
    background-color: #f8f9fa;
  }

  table.dataTable thead th {
    background-color: #e0f7fa;
    color: #333;
  }
</style>
{% endblock %}